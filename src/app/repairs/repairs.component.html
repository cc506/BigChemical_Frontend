<mat-toolbar style="margin-top: -1%;"color="primary">
  <mat-toolbar-row>
    <a [routerLink]="['/']">
      <h1 style="color: white;">Big Chemical Inc</h1>
    </a>
    <span class="menu-spacer"></span>
    <div>
      <a mat-button [routerLink]="'/employee'"> Employees </a>
      <a mat-button [routerLink]="'/drug'"> Activations</a>
      <a mat-button [routerLink]="'/sensors'"> Sensors </a>
      <a mat-button [routerLink]="'/repairs'"> Repairs </a>
      <a mat-button [routerLink]="'/access'"> Tracking </a>
      <a mat-button [routerLink]="'/access-rights'"> Access Rights </a>
    </div>
    <span class="menu-spacer"></span>
    <button mat-raised-button color="warn" (click)="goToLoginPage()">Log Out</button>


  </mat-toolbar-row>
</mat-toolbar>

<mat-tab-group style="margin: auto;">
  <mat-tab label="Tables">
    <mat-card>
        <mat-form-field class="full-width" appearance="legacy">
          <mat-label>sensorID</mat-label>
          <input matInput [(ngModel)]="sensor_ID" #first="ngModel">
        </mat-form-field>
        <br>
        <button mat-raised-button (click)="searchRepair(sensor_ID)"type="submit">Search</button>

      <ng-container *ngIf="sensor_repairs">
        <table class="table table-striped table-hover">
          <thead class="thead-dark">
            <tr style="background-color:lightyellow">
              <th scope="col">#</th>
              <th scope="col">SensorID</th>
              <th scope="col">Date Down</th>
              <th scope="col">Date Restored</th>
              <th scope="col">Technician</th>
              <th scope="col">Cause</th>
              <th scope="col">Repair</th>
            </tr>
          </thead>
        
          <tbody>
            <ng-container *ngFor="let repair of sensor_repairs; index as i;">
              <tr>
                <td>{{i+1}}</td>
                <td>{{repair.sensorID}}</td>
                <td>{{repair.dateDown}}</td>
                <td>{{repair.dateRestored}}</td>
                <td>{{repair.technician_name}}</td>
                <td>{{repair.cause}}</td>
                <td>{{repair.repair}}</td>
              </tr>
            </ng-container>
          </tbody>
        </table>
      </ng-container>
    </mat-card>
  </mat-tab>
  <mat-tab label="Add Repair">
    <mat-card style="margin-left: 2%; margin-right: 2%;">
      <mat-card-header>
        <mat-card-title>Sensors Form</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <form [formGroup]="repairForm" class="form-container" (ngSubmit)="onSubmit()">
          <ng-template matStepLabel>Drug Tests</ng-template>

          <div fxLayout="row" fxLayout.xs="column">
            <div div fxFlex="55" class="sec1" fxFlex.xs="50" fxFlexFill>
              <mat-form-field class="full-width" appearance="legacy">
                <mat-label>sensorID</mat-label>
                <input matInput formControlName="sensorID">
              </mat-form-field>
            </div>
            <div div fxFlex="55" class="sec2" fxFlex.xs="50">
              <mat-form-field class="full-width" appearance="legacy">
                <mat-label>Technician ID</mat-label>
                <input matInput formControlName="technicianID">
              </mat-form-field>
            </div>
          </div>

          <div fxLayout="row" fxLayout.xs="column">
              <mat-form-field style="width: 98%" appearance="fill">
                <mat-label>Enter a date range</mat-label>
                <mat-date-range-input [rangePicker]="edupicker">
                  <input matStartDate formControlName="dateDown" placeholder="Start date">
                  <input matEndDate formControlName="dateRestored" placeholder="End date">
                </mat-date-range-input>
                <mat-hint>MM/DD/YYYY â€“ MM/DD/YYYY</mat-hint>
                <mat-datepicker-toggle matSuffix [for]="edupicker"></mat-datepicker-toggle>
                <mat-date-range-picker #edupicker></mat-date-range-picker>
              </mat-form-field>
          </div>


          <div fxLayout="row" fxLayout.xs="column">
            <div div fxFlex="55" class="sec1" fxFlex.xs="50" fxFlexFill>
              <mat-form-field class="full-width" appearance="legacy">
                <mat-label>Cause</mat-label>
                <input matInput formControlName="cause">
              </mat-form-field>
            </div>
            <div div fxFlex="55" class="sec2" fxFlex.xs="50">
              <mat-form-field class="full-width" appearance="legacy">
                <mat-label>Repair(s) done</mat-label>
                <input matInput formControlName="repair">
              </mat-form-field>
            </div>
          </div>

        <button mat-raised-button color="warn" type="submit">Submit</button>
        </form>

      </mat-card-content>
    </mat-card>
  </mat-tab>
</mat-tab-group>
